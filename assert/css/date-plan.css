/* 全局重置与默认字体已集中到 background.css */

/* 原纵向布局容器已替换为表格形式 */

.plan-table {
  width: 100%;
  max-width: 1000px;
  margin: 10px auto 20px;
  background: #fff;
  border: 1px solid #d0d7de;
  box-shadow: 0 2px 8px rgb(0 0 0 / 8%);
  border-collapse: collapse;
  table-layout: fixed; /* 让列宽更稳定 */
}

.plan-table thead th {
  font-size: 0.95rem;
  font-weight: 600;
  background: #f6f8fa;
}

.plan-table th,
.plan-table td {
  padding: 5px 6px;
  border: 1px solid #d0d7de;
  vertical-align: top;
}

/* 文本区域与输入控件在单元格内铺满 */

/* 统一所有计划与备注输入框样式（当前用户与其他用户） */

/* 原来仅针对 #plan 与 #remark，扩展为表格内所有 textarea */
textarea#plan,
textarea#remark,
.plan-table td textarea {
  width: 100%;
  min-height: 60px;
  padding: 8px;
  overflow: auto; /* 默认允许出现滚动条 */
  font-size: 0.9rem;
  line-height: 1.4;
  background: #fff;
  border: 1px solid #c2c8d0;
  border-radius: 4px;
  resize: none;
}

/* 非当前用户行：减小高度以节省空间 */

textarea#plan:disabled,
textarea#remark:disabled,
.plan-table td textarea:disabled,
/* 只读态与禁用态统一视觉，便于他人内容滚动但不可编辑 */
.plan-table td textarea[readonly] {
  color: #555;
  background: #f3f4f6;
}

/* 非当前用户行尺寸（放在禁用态规则之后，避免层级警告） */
.plan-table tr:not(.current-user-row) td textarea {
  /* 使用 rows=2 控制高度，去掉最小高度以精确为两行 */
  height: auto;
  min-height: 0;
  padding: 5px; /* 紧凑显示 */
  overflow: hidden auto; /* x 隐藏，y 自动滚动 */
  line-height: 1.25;
}

/* 姓名与完成情况居中显示 */
.plan-table td.name-cell,
.plan-table td.status-cell {
  text-align: center;
  vertical-align: middle;
}

/* 完成情况内的单选分组居中对齐 */

.status-cell .radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}

.status-cell .radio-option {
  display: flex;
  align-items: center;
  font-size: 0.85rem;
  gap: 4px;
}

.action-cell {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.action-cell button {
  padding: 2px 4px;
  font-size: 0.85rem;
  background: #fff;
  border: 1px solid #c2c8d0;
  border-radius: 4px;
  transition:
    background 0.15s ease,
    color 0.15s ease;
  cursor: pointer;
}

.action-cell button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.action-cell button:hover:not(:disabled) {
  color: #fff;
  background: #0366d6;
}

/* 响应式：窄屏时允许横向滚动 */
.plan-table-wrapper {
  padding: 0 12px;
  overflow-x: auto;
}

/* 日期控制条与表格间距 */
.date-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 10px auto 12px;
  gap: 12px;
}

.date-controls a {
  font-size: 0.85rem;
  text-decoration: none;
  color: #0366d6;
}

.date-controls a:hover {
  text-decoration: underline;
}

/* 保留页面其它普通表格的基础样式（若存在） */
table:not(.plan-table) {
  border-collapse: collapse;
}

table:not(.plan-table) th,
table:not(.plan-table) td {
  padding: 8px;
  border: 1px solid #333;
}

/* —— 移动端优化（≤640px）：表格卡片化、触控增强、日期栏吸顶 —— */
@media (width <= 640px) {
  /* 日期控制条吸顶与更友好的触控区 */
  .date-controls {
    position: sticky;
    top: 0;
    z-index: 10;
    padding: 8px 12px;
    margin: 0;
    background: rgb(255 255 255 / 92%);
    backdrop-filter: saturate(180%) blur(6px);
    border-bottom: 1px solid #e5e7eb;
  }

  .date-controls a {
    padding: 8px 10px;
    border: 1px solid #c2c8d0;
    border-radius: 6px;
  }

  #appointment-date {
    padding: 8px 10px;
    font-size: 1rem;
  }

  /* 表格转卡片布局 */
  .plan-table {
    border: 0;
    box-shadow: none;
  }

  .plan-table thead {
    display: none;
  }

  .plan-table tr {
    display: block;
    max-width: 680px;
    margin: 10px auto;
    overflow: hidden;
    border: 1px solid #d0d7de;
    border-radius: 8px;
    box-shadow: 0 1px 4px rgb(0 0 0 / 6%);
  }

  .plan-table td {
    display: grid;
    align-items: start;
    padding: 10px 12px;
    border: 0;
    border-bottom: 1px solid #e5e7eb;
    grid-template-columns: 30% 1fr; /* 左侧标题、右侧内容 */
    gap: 10px;
  }

  .plan-table td:last-child {
    border-bottom: 0;
  }

  /* 通过 nth-child 注入列标题，无需改动 HTML/JS */
  .plan-table td:nth-child(1)::before {
    font-weight: 600;
    color: #475569;
    content: "姓名";
  }

  .plan-table td:nth-child(2)::before {
    font-weight: 600;
    color: #475569;
    content: "今日计划";
  }

  .plan-table td:nth-child(3)::before {
    font-weight: 600;
    color: #475569;
    content: "完成情况";
  }

  .plan-table td:nth-child(4)::before {
    font-weight: 600;
    color: #475569;
    content: "备注";
  }

  .plan-table td:nth-child(5)::before {
    font-weight: 600;
    color: #475569;
    content: "操作";
  }

  /* 名称与状态在卡片内左对齐显示 */
  .plan-table td.name-cell,
  .plan-table td.status-cell {
    text-align: left;
    vertical-align: top;
  }

  /* 单选按钮更易点按 */
  .status-cell .radio-group {
    justify-content: flex-start;
    gap: 12px;
  }

  /* 操作列：使用 flex 取代网格，按钮水平等宽对齐 */
  .plan-table td.action-cell {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .plan-table td.action-cell::before {
    flex: 0 0 30%;
  }

  .plan-table td.action-cell > button {
    flex: 1 1 0;
    padding: 10px 12px;
    font-size: 1rem;
  }

  .status-cell .radio-option label {
    font-size: 0.95rem;
  }

  .status-cell .radio-option input[type="radio"] {
    width: 20px;
    height: 20px;
  }

  /* 操作按钮横排、等宽并增大触控面积 */
  .action-cell {
    flex-direction: row;
    gap: 10px;
  }

  /* 输入区更易编辑 */
  textarea#plan,
  textarea#remark,
  .plan-table td textarea {
    min-height: 84px;
    font-size: 1rem;
  }

  /* 他人内容移动端仍保持两行可滚动，覆盖上面的移动端最小高度 */
  .plan-table tr:not(.current-user-row) td textarea {
    height: auto;
    min-height: 0;
    overflow: hidden auto;
  }

  /* 卡片左右留白略收紧 */
  .plan-table-wrapper {
    padding: 0 8px;
  }
}
